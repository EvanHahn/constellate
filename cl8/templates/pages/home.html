{% extends "base.html" %}
{% load static widget_tweaks %}
{% block content %}
  {% include "_nav_menu.html" %}
  <section class="mb-4">
    <div class="card search-block">
      <div class="card-body">
        <form method="get">
          <p>
            <label class="inline-block w-100 mr-8"
                   for="{{ profile_filter.form.bio.id_for_label }}">Show profile results matching:</label>
            {% render_field profile_filter.form.bio hx-get="/" hx-trigger="keyup changed delay:1s" hx-target=".sidebar" %}
            <input class="btn mt-4 ml-4" type="submit" />
          </p>
        </form>
      </div>
    </div>
    {% comment %} TODO TIDY THIS UP {% endcomment %}
    <script type="text/javascript"
            src="{% static 'admin/js/vendor/jquery/jquery.js' %}"></script>
    {{ profile_filter.form.media }}
    <script src="{% static 'js/htmx.js' %}" defer></script>
  </section>
  <section class="grid grid-cols-[400px_minmax(900px,_1fr)_100px]">
    <section class="sidebar" style="height:50vh; overflow:auto;">
      {% include "pages/_paginated_profiles.html" %}
    </section>
    <section>
      <div id="profile-slot" class="card bg-base-100">
        {% if profile %}
          {% include '_profile.html' %}
        {% else %}
          <div class="card-body prose">
            <h1>Enter profile here</h1>
          </div>
        {% endif %}
      </div>
    </section>
  </section>
  </script>
{% endblock content %}
